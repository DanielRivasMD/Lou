#!/bin/awk -f

################################################################################

BEGIN{
  FS="-";
  title = "";
}

{

# Original
################################################################################

  original = $0;

################################################################################

# Author
################################################################################

  author = $1;
  sub("./", "", author);

  for (i = 2; $i !~/^[0-9]{4}$/; i++)
  {
    author = author "-" $i;
  }

################################################################################

# Title
################################################################################

  for ( j = i + 1; j < NF; j++ )
  {
    if ( length($j) > 3 )
    {
      if ( t_count == 0 )
      {
        title = $j;
      }
      else
      {
        title = title "_" $j;
      }
      t_count++;
    }
  }

################################################################################

  print original, author "-" title "." suffix;
  title = "";
  t_count = 0;
}

################################################################################
